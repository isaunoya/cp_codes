# s3.

我们把 $b$ 分段，分成 $m$ 个线段 $(l_i, r_i, v_i)$（表示 $[l, r]$ 都为 $v$）有解仅当，$v$ 是 $a$ 的子序列，因为两个的位置不能交换（详见第二个样例）。

可以得到一个 $p_i$ 满足 $a_{p_i} = v_i$，$p_i$ 是一个递增序列。

然后我们如果使得 $p_i \geq r_i$，我们就可以按照左端点的顺序来依次向左覆盖，因为 $p_i > r_i$ 的部分会被下一个盖住！

所以我们只要尽量在第一次操作使得 $p_i \geq r_i$ 即可！

---

首先可以有一个初步的想法，是将 $p_i$ 向右覆盖到 $n-m+i$。（也就是把这些值都放到 $n-m\ldots n-1$）这样一定可以用 $m$ 次操作使得 $p_i \geq r_i$，发现这样可能会超次数！

但是发现我们只需要把 $p_i \geq r_i$ 这个条件满足了就好。

倒着考虑（这样不会影响做过的操作）：

- $p_i \geq r_i$，不做任何操作
- $l_i < p_i < r_i$，那么我覆盖 $[p_i, r_i]$。
- $p_i \leq l_i$，覆盖 $[p_i, r_i]$，并且 $[p_i, l_i)$ 的部分会被下一个覆盖掉，所以这个做完之后就直接在下次操作就不做了！（更好理解的，就是 $p_{i - 1} < p_i \leq l_i$，也就是一定会进行操作 $[p_{i-1}, r_{i-1} = l_{i}-1]$.

---

下面是分析次数，题目要求小于等于 $N$ 次。

- 如果 $p_i \geq r_i$，那么只需要最后的操作一次。
- 如果 $l_i < p_i < r_i$，那么需要两次，但是区间长度大于等于 3。（最开始向右，后来向左）
- 如果 $p_i \leq l_i$，按照上面的分析，只会在最开始的时候操作一次。

通过区间长度以及对应的操作次数来分析，操作次数已经严格小于序列长度 $N$ 了，可以通过本题。

# s4.

- 提示：先考虑一棵树怎么做，不能存在任何一条灰边！

- 考虑一个连通块必有一颗生成树。生成树上两点的路径是唯一的，所以我们只需要对每个连通块拉出来一个生成树，对这个生成树的边染色即可，也就是说，这样可以符合每一个不在生成树上的边都有一条路径是颜色交替的！这样可以符合条件。
- 至于最小化，我们要说明这个是最小染色数量。考虑删掉任何一条生成树的边（试图减小染色数量），这样会导致那条边是灰色的，并且他们之间并不能通过颜色交替的边到达，因为染色过的边已经被断开了！至此我们证明了这是答案的下界！

所以我们只需要对每个连通块找一颗生成树然后交替染色即可，其余边都是灰边。
